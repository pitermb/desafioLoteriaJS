<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loteria</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

</head>

<body>
    <div class="jumbotron text-center">
        <header>
            <h1 class="d-inline p-2 bg-dark text-white">Desafio da Loteria</h1>
        </header>
    </div>
    <div class="text-center">
        <h3>Tente a sorte!</h3>
        <p class="text-white bg-dark">Selecione a opcão de quantas jogadas você deseja e "execute"!</p>
    </div>
    <div class="text-center">
        <main>
            <div class="container">
                <div class="row">
                    <div class="col-sm-5 container clearfix">
                        <p>
                            <label for="inNumInfo">Digite de 6 a 15 números entre de 1 a 60</label>
                            <input type="number" id="inNumInfo" min="1" max="60" autofocus>
                            <button class="btn btn-primary" id="bValidar">Válidar Número</button><br>
                            <b><output id="opNumInfo">0</output></b>
                        </p>
                        <p>
                            <label for="idExibir2"><b>Clique em "Executar" para descobrir se ganhou!</b></label><br>
                            <button class="btn btn-primary" id="bExecutar"><b>Executar</b></button><br><br>
                            <b><output class="p-3 mb-2 bg-success text-white" id="idOut2" name="nmOut"
                                    hidden></output></b>
                        </p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
        </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous">
        </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
        integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous">
        </script>
    <script>
        //Declarando var globais de sorteio e capturar numero
        var sorteio = []
        var numInfo = []

        //Executando a validação de números informados pelo usuario
        document.getElementById("bValidar").onclick = function () {

            //Capturando o número solicitado pelo usuario
            if (numInfo.length < 15) {
                numInfo.push(Number(document.getElementById("inNumInfo").value))
            } else {
                alert(`Limite ja atingido!`)
            }

            //console.log(numInfo.length);
            document.getElementById("opNumInfo").value = `${numInfo.length} = ${numInfo.sort()}`
        }

        //Executando o botao Executar para retornar a contagem de números
        document.getElementById("bExecutar").onclick = function () {
            //Declarando a var pro tempo
            let data1 = new Date()
            //console.log(data1);
            let data2

            let comp = true
            let l = 0
            let f = []
            let a = 0

            //Determinando var para o laço
            let contador = 0
            let entrou = true
            let jogadas = true

            //Declarando 6 número aleatorios
            while (sorteio.length < 6) {
                var aleatorio = Math.floor((Math.random() * 60) + 1)
                if (sorteio.indexOf(aleatorio) == -1) {
                    sorteio.push(aleatorio)
                }
            }

            //Iniciando o laço para testar a sorte
            while (jogadas == true) {
                //Imprimir mais 6 números aleatorios em cima dos 6 números base
                while (entrou == true) {
                    for (let index = 0; index < sorteio.length; index++) {
                        sorteio[index] = Math.floor((Math.random() * 60) + 1)
                    }
                    entrou = false
                }

                //Iniciando comparação pra ver se os numeros aleatorios sao iguais ou nao
                for (let xedix = 0; xedix < sorteio.length; xedix++) {
                    for (let inox = 0; inox < sorteio.length; inox++) {
                        if (sorteio[xedix] == sorteio[inox]) {
                            //Somando a contagem quando os números nao forem iguais no sorteio
                            contador++
                        }
                    }
                }

                //Exibindo os numeros sorteados
                //console.log(sorteio.join("-"));

                //Iniciando a comparação dos numeros aleatorios com os numeros solicitados pelo usuario
                if (numInfo[1] == sorteio[1] || numInfo[2] == sorteio[1] || numInfo[3] == sorteio[1] || numInfo[4] == sorteio[1] || numInfo[5] == sorteio[1] || numInfo[6] == sorteio[1] || numInfo[7] == sorteio[1] || numInfo[8] == sorteio[1] || numInfo[9] == sorteio[1] || numInfo[10] == sorteio[1] || numInfo[11] == sorteio[1] || numInfo[12] == sorteio[1] || numInfo[13] == sorteio[1] || numInfo[14] == sorteio[1] || numInfo[15] == sorteio[1]) {
                    if (numInfo[1] == sorteio[2] || numInfo[2] == sorteio[2] || numInfo[3] == sorteio[2] || numInfo[4] == sorteio[2] || numInfo[5] == sorteio[2] || numInfo[6] == sorteio[2] || numInfo[7] == sorteio[2] || numInfo[8] == sorteio[2] || numInfo[9] == sorteio[2] || numInfo[10] == sorteio[2] || numInfo[11] == sorteio[2] || numInfo[12] == sorteio[2] || numInfo[13] == sorteio[2] || numInfo[14] == sorteio[2] || numInfo[15] == sorteio[2]) {
                        if (numInfo[1] == sorteio[3] || numInfo[2] == sorteio[3] || numInfo[3] == sorteio[3] || numInfo[4] == sorteio[3] || numInfo[5] == sorteio[3] || numInfo[6] == sorteio[3] || numInfo[7] == sorteio[3] || numInfo[8] == sorteio[3] || numInfo[9] == sorteio[3] || numInfo[10] == sorteio[3] || numInfo[11] == sorteio[3] || numInfo[12] == sorteio[3] || numInfo[13] == sorteio[3] || numInfo[14] == sorteio[3] || numInfo[15] == sorteio[3]) {
                            if (numInfo[1] == sorteio[4] || numInfo[2] == sorteio[4] || numInfo[3] == sorteio[4] || numInfo[4] == sorteio[4] || numInfo[5] == sorteio[4] || numInfo[6] == sorteio[4] || numInfo[7] == sorteio[4] || numInfo[8] == sorteio[4] || numInfo[9] == sorteio[4] || numInfo[10] == sorteio[4] || numInfo[11] == sorteio[4] || numInfo[12] == sorteio[4] || numInfo[13] == sorteio[4] || numInfo[14] == sorteio[4] || numInfo[15] == sorteio[4]) {
                                if (numInfo[1] == sorteio[5] || numInfo[2] == sorteio[5] || numInfo[3] == sorteio[5] || numInfo[4] == sorteio[5] || numInfo[5] == sorteio[5] || numInfo[6] == sorteio[5] || numInfo[7] == sorteio[5] || numInfo[8] == sorteio[5] || numInfo[9] == sorteio[5] || numInfo[10] == sorteio[5] || numInfo[11] == sorteio[5] || numInfo[12] == sorteio[5] || numInfo[13] == sorteio[5] || numInfo[14] == sorteio[5] || numInfo[15] == sorteio[5]) {
                                    if (numInfo[1] == sorteio[6] || numInfo[2] == sorteio[6] || numInfo[3] == sorteio[6] || numInfo[4] == sorteio[6] || numInfo[5] == sorteio[6] || numInfo[6] == sorteio[6] || numInfo[7] == sorteio[6] || numInfo[8] == sorteio[6] || numInfo[9] == sorteio[6] || numInfo[10] == sorteio[6] || numInfo[11] == sorteio[6] || numInfo[12] == sorteio[6] || numInfo[13] == sorteio[6] || numInfo[14] == sorteio[6] || numInfo[15] == sorteio[6]) {
                                        //Se todos batem, o laço para e o tempo2 determina o fim
                                        jogadas = false
                                        data2 = new Date()
                                    }
                                }
                            }
                        }
                    }
                }
                
                //Se os numeros nao baterem, 2 while volta a gerar 6 numeros aleatorios
                entrou = true
            }
            //Calculando o tempo em SEGUNDOS
            let tempo = (data2 - data1) / 1000

            //Comparando as vitorias e o tempo gasto
            if (contador == 1) {
                console.log("Parabéns tu é brabo!");
                document.getElementById("idOut2").hidden = false
                document.getElementById("idOut2").value = `Parabéns, você ganhou com ${contador} tentativa em ${tempo} segundos!`
            }
            console.log(`Foram ${contador} tentativas até acertar o sorteio...`);
            console.log(tempo + "segundos");

            document.getElementById("idOut2").hidden = false
            document.getElementById("idOut2").value = `Você ganhou com ${contador} tentativas em ${tempo} segundos. Mais sorte da próxima vez...`
            
        }
    </script>

</body>

</html>